//rarus tenkam 05.10.2016 mantis 7183 ++

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	ФактическаяДатаДоставки = ТекущаяДата();
	РежимИзменения = "ТолькоСтрокиСпустойДатой";
	ВидДаты = "ДатаДоставки";	//rarus tenkam 23.02.2017 mantis 8492 +
КонецПроцедуры

&НаКлиенте
Процедура КомандаОК(Команда)
	Если ФактическаяДатаДоставки  > ТекущаяДата() И 
		ВидДаты = "ДатаДоставки" Тогда	//rarus tenkam 23.02.2017 mantis 8492 +
		Сообщить("Дата доставки больше, чем текущая дата!");
		Возврат;
	КонецЕсли;
	
	Если НЕ ЗначениеЗаполнено(ФактическаяДатаДоставки) Тогда
		//rarus tenkam 23.02.2017 mantis 8492 +++
		//Сообщить("Дата фактической доставки не заполнена!");
		Сообщить("Устанавливаемая дата не заполнена!");
		//rarus tenkam 23.02.2017 mantis 8492 ---
		Возврат;
	КонецЕсли;
	
	НаВсеСтроки = (РежимИзменения = "ВсеСтроки");	
	ПараметрРежима = Новый Структура;
	ПараметрРежима.Вставить("НаВсеСтроки", НаВсеСтроки);
	ПараметрРежима.Вставить("ФактДата", ФактическаяДатаДоставки);
	ПараметрРежима.Вставить("ВидДаты", ВидДаты);	//rarus tenkam 23.02.2017 mantis 8492 +
	Закрыть(ПараметрРежима);

КонецПроцедуры

//rarus tenkam 05.10.2016 mantis 7183 --