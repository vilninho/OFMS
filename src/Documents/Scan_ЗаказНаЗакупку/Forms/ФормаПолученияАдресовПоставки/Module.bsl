
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.СписокАдресов.Количество() <> 0 Тогда
		СписокАдресов.Загрузить(Параметры.СписокАдресов.Выгрузить());
	Иначе
		ПараметрыВызова = Новый Структура;
		ПараметрыВызова.Вставить("Ответственный", Параметры.Ответственный);
		
		ОтветСервиса = Scan_ВебСервисы.ВызовВебСервиса1СДО("GetListOfDeliveries", ПараметрыВызова, Отказ);
		
		Если Не Отказ Тогда
			Для Каждого АдресПоставки Из ОтветСервиса Цикл
				НоваяСтрока = СписокАдресов.Добавить();
				НоваяСтрока.АдресПоставки = АдресПоставки;
			КонецЦикла;
		Иначе
			Сообщить(ОтветСервиса);
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ВыбратьАдрес(Команда)
	
	СтруктураАдресов = Новый Структура;
	СтруктураАдресов.Вставить("ВыбранныйАдрес", Элементы.СписокАдресов.ТекущиеДанные.АдресПоставки);
	СтруктураАдресов.Вставить("СписокАдресов",  СписокАдресов);
	
	Закрыть(СтруктураАдресов);
	
КонецПроцедуры

&НаКлиенте
Процедура СписокАдресовВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	ВыбратьАдрес(Команды.Найти("ВыбратьАдрес"));
	
КонецПроцедуры
