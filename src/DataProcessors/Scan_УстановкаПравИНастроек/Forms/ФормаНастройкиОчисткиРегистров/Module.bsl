//rarus vikhle 23.09.2021 mt 17927 +++
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ТаблицаНастроек = Scan_ВспомогательныеФункцииСервер.РазобратьНастройкиОчисткиРегистров(Параметры.СтрокаНастроек);
		
	Для Каждого СтрокаТаблицы Из ТаблицаНастроек Цикл
		
		// Проверка на наличие реквизита с именем, равным имени переданного регистра
		ЗначениеПоУмолчанию = Неопределено;
		СтруктураСвойств	= Новый Структура(СтрокаТаблицы.РегистрСведений, ЗначениеПоУмолчанию);
		ЗаполнитьЗначенияСвойств(СтруктураСвойств, ЭтотОбъект);
        ЕстьРеквизит		= Не (СтруктураСвойств[СтрокаТаблицы.РегистрСведений] = ЗначениеПоУмолчанию);
		
		Если ЕстьРеквизит Тогда
			ЭтотОбъект[СтрокаТаблицы.РегистрСведений] = СтрокаТаблицы.КоличествоДней;	
		Иначе
			ВывестиСообщениеПол(Нстр("ru = 'На форме отсутствует реквизит для настройки регистра ""%1""'"),,,,,
								СтрокаТаблицы.РегистрСведений);
		КонецЕсли;	
		
	КонецЦикла;	
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Выбрать(Команда)
	
	Если Не ПроверитьЗаполнение() Тогда
		Возврат;
	КонецЕсли;	
	
	СтрокаНастройки = СформироватьСтрокуНастройки();
	Закрыть(СтрокаНастройки);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Функция СформироватьСтрокуНастройки()
	
	//rarus vikhle 29.09.2021 mt 17927 +++
	//СтрокаНастройки = "Scan_РегистрацияОбмена1БД" + "_" + Scan_РегистрацияОбмена1БД + ","
	//				  + "Scan_Обмен1БДНеотправленныеСобытия" + "_" + Scan_Обмен1БДНеотправленныеСобытия + ","  
	//				  + "Scan_Обмен1БДОтправленныеСобытия" + "_" + Scan_Обмен1БДОтправленныеСобытия + "," 
	//				  + "Scan_ОтправленныеПисьма" + "_" + Scan_ОтправленныеПисьма + "," 
	//				  + "Scan_Обмен1БДПроверкаМетодовОбменаС1БД" + "_" + Scan_Обмен1БДПроверкаМетодовОбменаС1БД + ","
	//				  + "Scan_РегистрацияОбменаС1СДО" + "_" + Scan_РегистрацияОбменаС1СДО + "," 
	//				  + "Scan_РегистрацияОбменаСПорталом" + "_" + Scan_РегистрацияОбменаСПорталом + "," 
	//				  + "Scan_РегистрацияСессийИзмененныхОбъектов1БД" + "_" + Scan_РегистрацияСессийИзмененныхОбъектов1БД + "," 
	//				  + "Scan_Обмен1БДНезагруженныеОбъекты" + "_" + Scan_Обмен1БДНезагруженныеОбъекты;
	
	СтрокаНастройки = Метаданные.РегистрыСведений.Scan_РегистрацияОбмена1БД.Имя + "_" + Scan_РегистрацияОбмена1БД + ","
					  + Метаданные.РегистрыСведений.Scan_Обмен1БДНеотправленныеСобытия.Имя + "_" + Scan_Обмен1БДНеотправленныеСобытия + ","  
					  + Метаданные.РегистрыСведений.Scan_Обмен1БДОтправленныеСобытия.Имя + "_" + Scan_Обмен1БДОтправленныеСобытия + "," 
					  + Метаданные.РегистрыСведений.Scan_ОтправленныеПисьма.Имя + "_" + Scan_ОтправленныеПисьма + "," 
					  + Метаданные.РегистрыСведений.Scan_Обмен1БДПроверкаМетодовОбменаС1БД.Имя + "_" + Scan_Обмен1БДПроверкаМетодовОбменаС1БД + ","
					  + Метаданные.РегистрыСведений.Scan_РегистрацияОбменаС1СДО.Имя + "_" + Scan_РегистрацияОбменаС1СДО + "," 
					  + Метаданные.РегистрыСведений.Scan_РегистрацияОбменаСПорталом.Имя + "_" + Scan_РегистрацияОбменаСПорталом + "," 
					  + Метаданные.РегистрыСведений.Scan_РегистрацияСессийИзмененныхОбъектов1БД.Имя + "_" + Scan_РегистрацияСессийИзмененныхОбъектов1БД + "," 
					  + Метаданные.РегистрыСведений.Scan_Обмен1БДНезагруженныеОбъекты.Имя + "_" + Scan_Обмен1БДНезагруженныеОбъекты;
	//rarus vikhle 29.09.2021 mt 17927 ---
	
	Возврат СтрокаНастройки;				
	
КонецФункции	

#КонецОбласти
//rarus vikhle 23.09.2021 mt 17927 ---


